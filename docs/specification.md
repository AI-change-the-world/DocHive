# 🧭 DocHive 智能文档分类分级系统
> **版本：** v1.0  
> **文档状态：** 初稿  
> **编写日期：** 2025-10-21  
> **作者：** 顾程熙  

---

## 一、项目概述

### 1.1 背景说明
随着企业内部与外部文档的激增，传统基于文件夹与标签的分类方式已难以满足高效检索与智能分析的需求。  
**DocHive** 系统旨在构建一个融合「自定义分类模板」「大模型智能分类」「自动关键信息抽取」「编号化索引检索」的一体化智能文档分类系统，  
实现从文档上传到结构化归档的全流程自动化。

### 1.2 项目目标
- 支持用户自定义任意层级分类模板  
- 基于大语言模型（LLM）的文档智能分类  
- 自动生成标准化分类编号（如 `2025-RD-PLN-0001`）  
- 支持不同类型文档的关键字段提取  
- 支持多维度检索（层级检索 + 字段检索 + 全文检索）  
- 与知识库或档案系统无缝集成  

---

## 二、系统总体设计

### 2.1 系统架构概述

┌─────────────────────────────────────┐
 │            DocHive 系统结构          │
 ├─────────────────────────────────────┤
 │ ① 分类模板管理模块                  │
 │ ② 文档上传与解析模块                │
 │ ③ 智能分类引擎（LLM Engine）        │
 │ ④ 信息抽取引擎（KeyExtractor）      │
 │ ⑤ 编号与索引模块                    │
 │ ⑥ 文档检索与管理模块                │
 │ ⑦ 系统配置与权限模块                │
 └─────────────────────────────────────┘

系统基于微服务化设计，采用前后端分离架构，后端负责分类逻辑与存储，前端负责模板定义与管理交互。

---

## 三、功能设计说明

### 3.1 分类模板管理模块
#### 功能描述
允许用户定义多级分类体系，用作文档归类依据。

#### 功能特性
- 自定义层级结构（无限递归）
- 分类模板版本管理
- 可视化模板设计界面
- 模板示例：
  年份 → 地点 → 部门 → 条线 → 文档类型

  #### 数据结构示例
  ```json
  {
  "template_id": "tpl_001",
  "name": "年度部门分类模板",
  "levels": [
    {"level": 1, "name": "年份"},
    {"level": 2, "name": "地点"},
    {"level": 3, "name": "部门"},
    {"level": 4, "name": "条线"},
    {"level": 5, "name": "类型"}
  ]
  }

### 3.2 文档上传与解析模块

#### 功能描述

接收文档并解析文本内容，供智能分类与字段抽取模块使用。

#### 功能特性

- 支持多格式文件：PDF, DOCX, TXT, Markdown 等
- 支持 OCR（图片类文件识别）
- 自动提取元信息（文件名、上传时间、作者等）
- 文本清洗与分段

------

### 3.3 智能分类引擎（LLM Classification Engine）

#### 功能描述

通过大语言模型自动推理文档所属分类路径。

#### 运行流程

1. 获取当前模板定义

2. 生成模型提示（Prompt）：

3. {
     "任务": "请根据模板提取分类信息",
     "模板": "年份-地点-部门-类型",
     "文档摘要": "……"
   }

   模型返回结构化结果，存储至分类记录表。

   输出样例{
     "年份": "2025",
     "地点": "上海",
     "部门": "研发部",
     "类型": "技术报告"
   }

   

   3.4 信息抽取模块（KeyExtractor）

   #### 功能描述

   针对不同文档类型配置抽取规则，生成结构化检索字段。
   配置样例{
     "type": "简历",
     "extract_fields": [
       {"name": "姓名", "pattern": "姓名[:：]\\s*(\\S+)"},
       {"name": "行业", "llm": true},
       {"name": "技能", "llm": true},
       {"name": "工作年限", "regex": "(\\d+)年"}
     ]
   }

   输出样例{
     "姓名": "张三",
     "行业": "互联网",
     "技能": ["Python", "数据分析"],
     "工作年限": 5
   }

   3.5 编号与索引模块

   功能描述

   自动生成统一分类编号，确保唯一性与检索友好性。

   编号规则

   [年份]-[部门代码]-[类型代码]-[流水号]
   示例：2025-RD-PLN-0001

   特点

   - 编号与分类路径绑定
   - 流水号自增
   - 模板化规则可配置



### 3.6 文档检索与管理模块

#### 功能描述

提供统一检索、展示与统计功能。

#### 功能特性

- 按分类层级过滤
- 关键字段检索（如姓名、行业等）
- 全文模糊检索
- 分类统计（按部门/年份/类型）
- 支持导出、权限控制

------

### 3.7 系统配置与权限模块

#### 功能特性

- 角色与用户权限分级（管理员/普通用户/审阅者）
- 模板与抽取配置权限隔离
- 操作日志记录与版本回溯

------

## 四、技术架构设计

| 模块          | 技术栈                          |
| ------------- | ------------------------------- |
| 后端          | Spring Boot / FastAPI           |
| ORM           | MyBatis-Plus / SQLAlchemy       |
| 数据库        | PostgreSQL / MySQL              |
| 文件存储      | MinIO / AWS S3                  |
| 向量/检索引擎 | Elasticsearch / Qdrant          |
| 大模型接口    | OpenAI / DeepSeek / 自建LLM服务 |
| 前端框架      | React + Ant Design              |
| 异步调度      | Celery / Spring Scheduler       |

------

## 五、数据库设计（草案）

### 5.1 表：`doc_class_template`

| 字段        | 类型     | 说明     |
| ----------- | -------- | -------- |
| id          | bigint   | 主键     |
| name        | varchar  | 模板名称 |
| levels      | json     | 层级定义 |
| creator     | varchar  | 创建者   |
| create_time | datetime | 创建时间 |

### 5.2 表：`doc_record`

| 字段         | 类型     | 说明     |
| ------------ | -------- | -------- |
| id           | bigint   | 文档ID   |
| title        | varchar  | 文件标题 |
| path         | varchar  | 文件路径 |
| class_path   | json     | 分类路径 |
| class_code   | varchar  | 分类编号 |
| extract_data | json     | 抽取信息 |
| create_time  | datetime | 上传时间 |

## 六、系统交互流程图

```
[用户上传文档]
        ↓
[文档解析模块]
        ↓
[LLM 分类引擎 → 分类模板映射]
        ↓
[生成分类编号]
        ↓
[信息抽取引擎 → 关键信息结构化]
        ↓
[数据库 & 向量库入库]
        ↓
[用户检索 / 审阅 / 导出]
```

------

## 七、未来扩展方向

- **模板继承与复用机制**
- **分类反馈自学习机制（Auto Prompt Optimization）**
- **知识图谱构建（文档节点关系自动生成）**
- **跨系统数据挂载（对接知识库、OA、档案系统）**
- **决策可解释性视图（展示分类依据）**

------

## 八、版本规划

| 版本 | 目标                     | 状态   |
| ---- | ------------------------ | ------ |
| v1.0 | 核心分类、抽取、编号功能 | 规划中 |
| v1.1 | 检索与统计模块           | 待开发 |
| v2.0 | 模型自学习与知识图谱化   | 规划中 |

------

## 九、附录

- 术语定义
  - **分类模板**：用于定义多级分类逻辑的树状结构
  - **分类编号**：文档唯一标识，用于检索与追踪
  - **抽取模板**：用于不同类型文档的字段提取规则定义

------

> © 2025 DocHive 智能文档分类分级系统
>  All Rights Reserved.