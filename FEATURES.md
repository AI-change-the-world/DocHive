# DocHive åŠŸèƒ½ç‰¹æ€§æ€»è§ˆ

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. å¤šæœç´¢å¼•æ“çµæ´»é…ç½® â­â­â­â­â­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼€å‘ç¯å¢ƒ                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚   SQLite     â”‚  å†…å­˜: ~50MB   æŸ¥è¯¢: 150ms             â”‚
â”‚  â”‚      +       â”‚  é…ç½®: é›¶é…ç½®                           â”‚
â”‚  â”‚ Database FTS â”‚  åœºæ™¯: å¼€å‘è°ƒè¯•                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿäº§ç¯å¢ƒ                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ PostgreSQL   â”‚  å†…å­˜: ~1GB    æŸ¥è¯¢: 20ms              â”‚
â”‚  â”‚      +       â”‚  é…ç½®: ä¸­ç­‰                             â”‚
â”‚  â”‚Elasticsearch â”‚  åœºæ™¯: å¤§è§„æ¨¡ç”Ÿäº§                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æµ·é‡æ•°æ®                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ PostgreSQL   â”‚  å†…å­˜: ~200MB  æŸ¥è¯¢: 15ms              â”‚
â”‚  â”‚      +       â”‚  é…ç½®: ä¸­ç­‰                             â”‚
â”‚  â”‚ ClickHouse   â”‚  åœºæ™¯: æ•°æ®åˆ†æ                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ™ºèƒ½æ–‡æ¡£åˆ†ç±»æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸Šä¼ æ–‡æ¡£ â”‚ --> â”‚ è§£æå†…å®¹ â”‚ --> â”‚ LLMåˆ†ç±» â”‚ --> â”‚ ç”Ÿæˆç¼–å· â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚               â”‚               â”‚
     v               v               v               v
  æ”¯æŒæ ¼å¼         OCRè¯†åˆ«        æ™ºèƒ½åŒ¹é…        è‡ªåŠ¨ç´¢å¼•
PDF/DOCX        å›¾ç‰‡æ–‡å­—        åˆ†ç±»æ¨¡æ¿        å”¯ä¸€ç¼–å·
TXT/MD          è¡¨æ ¼æ•°æ®        å±‚çº§è·¯å¾„        æ£€ç´¢ä¼˜åŒ–
```

### 3. å…¨æ–‡æ£€ç´¢æŠ€æœ¯å¯¹æ¯”

```
PostgreSQL GIN ç´¢å¼•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CREATE INDEX USING GIN                      â”‚
â”‚   (to_tsvector('simple', title || content))â”‚
â”‚                                             â”‚
â”‚ æŸ¥è¯¢: to_tsvector @@ plainto_tsquery       â”‚
â”‚ æ€§èƒ½: â˜…â˜…â˜…â˜…â˜†                                â”‚
â”‚ ä¸­æ–‡: éœ€è¦ pg_jieba                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MySQL FULLTEXT ç´¢å¼•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALTER TABLE ADD FULLTEXT INDEX             â”‚
â”‚   (title, content_text)                    â”‚
â”‚                                             â”‚
â”‚ æŸ¥è¯¢: MATCH AGAINST                         â”‚
â”‚ æ€§èƒ½: â˜…â˜…â˜…â˜†â˜†                                â”‚
â”‚ ä¸­æ–‡: éœ€è¦ ngram parser                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SQLite FTS5
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CREATE VIRTUAL TABLE USING fts5            â”‚
â”‚   (title, content_text)                    â”‚
â”‚                                             â”‚
â”‚ æŸ¥è¯¢: WHERE fts MATCH 'keyword'            â”‚
â”‚ æ€§èƒ½: â˜…â˜…â˜…â˜†â˜†                                â”‚
â”‚ ä¸­æ–‡: porter unicode61                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Elasticsearch
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PUT /index { mappings: { ... } }           â”‚
â”‚   analyzer: ik_max_word                     â”‚
â”‚                                             â”‚
â”‚ æŸ¥è¯¢: multi_match                           â”‚
â”‚ æ€§èƒ½: â˜…â˜…â˜…â˜…â˜…                                â”‚
â”‚ ä¸­æ–‡: ik_analyzer å®Œç¾æ”¯æŒ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”çŸ©é˜µ

### å†…å­˜å ç”¨

```
           0MB    250MB   500MB   750MB   1GB
SQLite     |â–ˆâ–ˆâ–ˆ|
PostgreSQL      |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
MySQL           |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
ClickHouse            |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
Elasticsearch                        |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
```

### æŸ¥è¯¢é€Ÿåº¦ (10K æ–‡æ¡£)

```
           0ms    50ms    100ms   150ms   200ms
Elasticsearch |â–ˆâ–ˆâ–ˆâ–ˆ|
ClickHouse       |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
PostgreSQL             |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
MySQL                         |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
SQLite                              |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
```

### é…ç½®å¤æ‚åº¦

```
           ç®€å•            ä¸­ç­‰            å¤æ‚
SQLite     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
PostgreSQL      |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
MySQL           |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
ClickHouse                 |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
Elasticsearch              |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|
```

---

## ğŸ”„ æœç´¢å¼•æ“åˆ‡æ¢

### ä¸€è¡Œé…ç½®åˆ‡æ¢

```env
# å¼€å‘ç¯å¢ƒ - é›¶é…ç½®
SEARCH_ENGINE=database
DATABASE_URL=sqlite:///./dochive.db

# æµ‹è¯•ç¯å¢ƒ - ä¸­ç­‰é…ç½®
SEARCH_ENGINE=database
DATABASE_URL=postgresql+asyncpg://localhost:5432/dochive

# ç”Ÿäº§ç¯å¢ƒ - é«˜æ€§èƒ½
SEARCH_ENGINE=elasticsearch
DATABASE_URL=postgresql+asyncpg://prod-host:5432/dochive
ELASTICSEARCH_URL=http://es-host:9200
```

### ä¼˜é›…é™çº§

```
ç”¨æˆ·é…ç½®: Elasticsearch
          â†“
ç³»ç»Ÿå°è¯•: åˆå§‹åŒ– ES è¿æ¥
          â†“
      â”Œâ”€â”€â”€â”´â”€â”€â”€â”
      â”‚æˆåŠŸ?   â”‚
      â””â”€â”€â”€â”¬â”€â”€â”€â”˜
  æˆåŠŸ â†™     â†˜ å¤±è´¥
ä½¿ç”¨ ES      é™çº§åˆ° Database
          â†“
    ç³»ç»Ÿæ­£å¸¸è¿è¡Œ âœ“
```

---

## ğŸ› ï¸ å·¥å…·é“¾

### é…ç½®å‘å¯¼æµç¨‹

```
å¯åŠ¨é…ç½®å‘å¯¼
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰æ‹©æœç´¢å¼•æ“     â”‚
â”‚ [1] Database    â”‚
â”‚ [2] Elasticsearchâ”‚
â”‚ [3] ClickHouse  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é…ç½®æ•°æ®åº“è¿æ¥   â”‚
â”‚ - SQLite        â”‚
â”‚ - PostgreSQL    â”‚
â”‚ - MySQL         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è‡ªåŠ¨æ›´æ–° .env   â”‚
â”‚ âœ“ å†™å…¥é…ç½®      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆå§‹åŒ–ç´¢å¼•      â”‚
â”‚ âœ“ åˆ›å»ºç´¢å¼•      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
      é…ç½®å®Œæˆ âœ“
```

### ä¸€é”®å¯åŠ¨æµç¨‹

```
è¿è¡Œ quick_start.bat/sh
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥ Python ç¯å¢ƒ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®‰è£…/æ£€æŸ¥ä¾èµ–     â”‚
â”‚ pip install ...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ›å»ºé»˜è®¤é…ç½®      â”‚
â”‚ SQLite + DB FTS  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆå§‹åŒ–æœç´¢ç´¢å¼•    â”‚
â”‚ init_search_...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ£€æŸ¥å¿…è¦æœåŠ¡      â”‚
â”‚ Redis / MinIO    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯åŠ¨åç«¯æœåŠ¡      â”‚
â”‚ python main.py   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
   æœåŠ¡å°±ç»ª âœ“
 http://localhost:8000
```

---

## ğŸ“¦ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ (æœ€å°åŒ–)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å¼€å‘æœºå™¨                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      DocHive Backend         â”‚  â”‚
â”‚  â”‚   (SQLite + Database FTS)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Redis  â”‚    â”‚  MinIO  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                      â”‚
â”‚  å†…å­˜å ç”¨: ~100MB                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç”Ÿäº§ç¯å¢ƒ (é«˜æ€§èƒ½)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç”Ÿäº§æœåŠ¡å™¨é›†ç¾¤                   â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Backend x3   â”‚    â”‚  PostgreSQL    â”‚  â”‚
â”‚  â”‚   (FastAPI)    â”‚----â”‚   (ä¸»ä»å¤åˆ¶)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                   â”‚
â”‚          â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Elasticsearch  â”‚  â”‚
â”‚                        â”‚   (é›†ç¾¤æ¨¡å¼)    â”‚  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Redis  â”‚    â”‚  MinIO  â”‚    â”‚ Nginx  â”‚ â”‚
â”‚  â”‚ (å“¨å…µ)   â”‚    â”‚ (åˆ†å¸ƒå¼) â”‚    â”‚ (LB)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                              â”‚
â”‚  å†…å­˜å ç”¨: ~4GB                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æŠ€æœ¯å®ç°

### æ•°æ®åº“åŸç”Ÿå…¨æ–‡æ£€ç´¢å®ç°

```python
# PostgreSQL
async def search_postgresql(keyword):
    query = text("""
        SELECT * FROM documents 
        WHERE to_tsvector('simple', title || ' ' || content_text)
              @@ plainto_tsquery('simple', :keyword)
    """)
    return await session.execute(query, {"keyword": keyword})

# MySQL
async def search_mysql(keyword):
    query = text("""
        SELECT * FROM documents 
        WHERE MATCH(title, content_text) 
              AGAINST(:keyword IN NATURAL LANGUAGE MODE)
    """)
    return await session.execute(query, {"keyword": keyword})

# SQLite
async def search_sqlite(keyword):
    query = text("""
        SELECT * FROM documents 
        WHERE id IN (
            SELECT rowid FROM documents_fts 
            WHERE documents_fts MATCH :keyword
        )
    """)
    return await session.execute(query, {"keyword": keyword})
```

### æœç´¢å¼•æ“å·¥å‚æ¨¡å¼

```python
class BaseSearchEngine(ABC):
    @abstractmethod
    async def search_documents(...): pass

class DatabaseEngine(BaseSearchEngine):
    # PostgreSQL/MySQL/SQLite FTS

class ElasticsearchEngine(BaseSearchEngine):
    # ES with ik_analyzer

class ClickHouseEngine(BaseSearchEngine):
    # ClickHouse MergeTree

def get_search_engine() -> BaseSearchEngine:
    if settings.SEARCH_ENGINE == 'elasticsearch':
        return ElasticsearchEngine()
    elif settings.SEARCH_ENGINE == 'clickhouse':
        return ClickHouseEngine()
    else:
        return DatabaseEngine()
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: ä¸ªäººå¼€å‘è€…

**éœ€æ±‚**: å¿«é€Ÿæ­å»º,é›¶é…ç½®  
**é…ç½®**: SQLite + Database FTS  
**å¯åŠ¨**: `quick_start.bat`  
**å†…å­˜**: ~50MB

### åœºæ™¯ 2: å°å‹å›¢é˜Ÿ

**éœ€æ±‚**: ä¸­å°è§„æ¨¡,ç¨³å®šå¯é   
**é…ç½®**: PostgreSQL + Database FTS  
**éƒ¨ç½²**: Docker Compose  
**å†…å­˜**: ~100MB

### åœºæ™¯ 3: ä¼ä¸šç”Ÿäº§

**éœ€æ±‚**: å¤§è§„æ¨¡,é«˜æ€§èƒ½  
**é…ç½®**: PostgreSQL + Elasticsearch  
**éƒ¨ç½²**: Kubernetes  
**å†…å­˜**: ~1GB

### åœºæ™¯ 4: æ•°æ®åˆ†æ

**éœ€æ±‚**: æµ·é‡æ•°æ®,å¿«é€ŸæŸ¥è¯¢  
**é…ç½®**: PostgreSQL + ClickHouse  
**éƒ¨ç½²**: åˆ†å¸ƒå¼é›†ç¾¤  
**å†…å­˜**: ~200MB

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### å¼€å‘é˜¶æ®µ
```
âœ“ ä½¿ç”¨ SQLite
âœ“ Database FTS
âœ“ å•æœºéƒ¨ç½²
âœ“ å†…å­˜ < 100MB
```

### æµ‹è¯•é˜¶æ®µ
```
âœ“ ä½¿ç”¨ PostgreSQL
âœ“ Database FTS
âœ“ Docker éƒ¨ç½²
âœ“ å†…å­˜ ~100MB
```

### ç”Ÿäº§é˜¶æ®µ
```
âœ“ ä½¿ç”¨ PostgreSQL
âœ“ Elasticsearch
âœ“ é›†ç¾¤éƒ¨ç½²
âœ“ å†…å­˜ ~1GB
âœ“ å¯ç”¨ç¼“å­˜
```

---

**æ›´æ–°æ—¶é—´**: 2025-10-22  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.1.0
